# Руководство по импорту данных в админ-панели

## Обзор

Функция импорта позволяет массово обновлять или добавлять данные через CSV файлы во всех разделах админ-панели (игроки, команды, матчи и т.д.).

## Как использовать

### 1. Экспорт текущих данных

1. Перейдите в нужный раздел админки (например, `http://localhost/admin/player/list`)
2. Нажмите кнопку **Export** 
3. Выберите формат **CSV**
4. Сохраните файл на компьютер

### 2. Редактирование данных

1. Откройте скачанный CSV файл в Excel, Google Sheets или текстовом редакторе
2. Внесите необходимые изменения:
   - **Для обновления**: оставьте `id` записи и измените другие поля
   - **Для добавления новых записей**: удалите значение `id` или оставьте пустым
3. Сохраните файл в формате CSV (UTF-8)

### 3. Импорт данных

1. В том же разделе админки нажмите кнопку **Import** (рядом с Export)
2. Выберите отредактированный CSV файл
3. Нажмите **Import**
4. Дождитесь сообщения об успешном импорте

## Важные моменты

### Формат данных

- **Разделитель**: запятая (,)
- **Кодировка**: UTF-8
- **Заголовки**: должны точно соответствовать названиям столбцов из экспорта

### Обработка записей

- **Записи с ID**: будут обновлены, если ID существует в базе
- **Записи без ID**: будут добавлены как новые
- **Пустые поля**: будут установлены в NULL (если поле допускает NULL)

### Типы данных

- **Числа**: вводите без пробелов и специальных символов
- **Булевы значения**: используйте `true`/`false`, `1`/`0`, `yes`/`no`
- **Даты**: формат зависит от поля, обычно `YYYY-MM-DD` или `YYYY-MM-DD HH:MM:SS`
- **Текст**: можно использовать кавычки для текста с запятыми

## Примеры использования

### Пример 1: Массовое обновление market_value игроков

```csv
id,name,market_value,position
2935,Lionel Messi,15000,Forward
2319,Cristiano Ronaldo,14000,Forward
```

### Пример 2: Добавление новых команд

```csv
id,name,name_rus,league_id
,New Team,Новая Команда,116
,Another Team,Другая Команда,116
```

### Пример 3: Обновление русских названий

```csv
id,name,name_rus
530,Manchester United,Манчестер Юнайтед
531,Liverpool,Ливерпуль
```

## Устранение неполадок

### Импорт завершился с ошибками

1. **Проверьте формат файла**: убедитесь, что это CSV с UTF-8 кодировкой
2. **Проверьте типы данных**: числовые поля должны содержать числа
3. **Проверьте обязательные поля**: некоторые поля не могут быть пустыми
4. **Проверьте внешние ключи**: ID связанных записей должны существовать

### Часть записей не импортировалась

- Проверьте логи приложения для деталей ошибок
- Убедитесь, что ID существующих записей корректны
- Проверьте ограничения базы данных (unique, foreign key и т.д.)

### Русский текст отображается неправильно

- Убедитесь, что файл сохранен в кодировке UTF-8
- В Excel используйте "Сохранить как" → "CSV UTF-8"

## Безопасность

⚠️ **Важно:**
- Всегда делайте резервную копию данных перед импортом
- Функция импорта доступна только администраторам
- Проверяйте данные перед импортом, особенно ID записей
- При массовом обновлении сначала протестируйте на небольшом объеме данных

## Технические детали

- **Максимальный размер файла**: зависит от настроек сервера (обычно до 10MB)
- **Транзакции**: весь импорт выполняется в одной транзакции - либо все записи импортируются, либо ни одна (при ошибках)
- **Производительность**: для больших файлов (>1000 записей) импорт может занять несколько минут
